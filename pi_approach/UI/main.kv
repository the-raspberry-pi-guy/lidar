#:kivy 1.9.2

#:set bar_height_width 100
#:set black [0,0,0,1]
#:set yheight 480
#:set xwidth 800

ScreenManagement:
	InitScreen:
	MainScreen:	

<InitScreen>:
	name:"initial"
	GridLayout:
		canvas.before:
			Rectangle:
				size:self.size
				source:"Background.png"
			Color:
				rgba:black
			Rectangle:
				pos:[bar_height_width,yheight]
				size:[5,-yheight]
			Rectangle:
				pos:[0,yheight-bar_height_width-10]
				size:[xwidth,5]
		cols: 2
		rows: 2
		Image:
			source:"logo.png"
			size_hint_x:None
			size_hint_y:None
			height:bar_height_width
			width:bar_height_width
		Label:
			text:"Initialising. Power on stepper motor and distance modules now!"
			color:black
			font_size:35
			text_size:self.size
			halign:"center"
			valign:"center"
			size_hint_y:None
			height:bar_height_width
		Switch:
			id: onoffswitch
			active: True
			on_active: root.power_off()
			size_hint_x:None
			width:bar_height_width
		BoxLayout:
			orientation:"horizontal"
			Label:
				markup:True
				text:"[size=40]Receiver:[/size]\n\n[size=60][color=008000]OK[/color][/size]"
				halign:"center"
				valign:"top"
				color:black
			Label:
				id: stepper_label
				markup:True
				text:"[size=40]Stepper:[/size]\n\n[size=60][color=ff0000]NO[/color][/size]"
				halign:"center"
				valign:"top"
				color:black
			Label:
				id: distance_label
				markup:True
				text:"[size=40]Distance:[/size]\n\n[size=60][color=ff0000]NO[/color][/size]"
				halign:"center"
				valign:"top"
				color:black

<MainScreen>:
	name:"main"
	GridLayout:
		canvas.before:
			Rectangle:
				size:self.size
				source:"Background.png"
			Color:
				rgba:black
			Rectangle:
				pos:[bar_height_width,yheight]
				size:[5,-yheight]
			Rectangle:
				pos:[0,yheight-bar_height_width-10]
				size:[xwidth,5]
		cols: 2
		rows: 2	
		Image:
			source:"logo.png"
			size_hint_x:None
			size_hint_y:None
			height:bar_height_width
			width:bar_height_width
		GridLayout:
			cols: 3
			rows: 1
			size_hint_x:None
			size_hint_y:None
			height:bar_height_width
			width:xwidth-bar_height_width
			Slider:
				id: value_slider
				min:0
				max:360
				step:1
				value:0
				on_value:root.change_value()
				size_hint_x:None
				width:4*bar_height_width
			Label:
				id: value_label
				size_hint_x:None
				width:20
				markup:True
			Button:
				size_hint_y:None
				height:(bar_height_width/100)*92
				text:"SCAN"
				on_press:root.scan()
		GridLayout:
			cols:1
			rows:2	
			size_hint_x:None
			size_hint_y:None
			height:yheight-bar_height_width-10
			width:bar_height_width
			padding:3
			ToggleButton:
				markup:True
				text:"[size=18]Enable\nLidar\nModule[/size]"
			ToggleButton:
				markup:True
				text:"[size=18]Enable\nCamera\nModule[/size]"
		Scatter:
			size_hint_x:None
			size_hint_y:None
			height:yheight-bar_height_width
			width:xwidth-bar_height_width
			# Make map into an image to display here
			Image:
				id: output_image
